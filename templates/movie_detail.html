{% extends "base.html" %}

{% block content %}
    <div class="movie-detail">
        <img src="{{ movie['Poster_Link'] }}" alt="{{ movie['Series_Title'] }} Poster" class="detail-poster">
        <div class="detail-info">
            <h2>{{ movie['Series_Title'] }} ({{ movie['Released_Year'] }})</h2>
            <p><strong>Genre:</strong> {{ movie['Genre'] }}</p>
            <p><strong>Director:</strong> {{ movie['Director'] }}</p>
            <p><strong>Stars:</strong> {{ movie['Star1'] }}, {{ movie['Star2'] }}, {{ movie['Star3'] }}</p>
            <p><strong>IMDB Rating:</strong> {{ movie['IMDB_Rating'] }}/10</p>
            <p><strong>Overview:</strong> {{ movie['Overview'] }}</p>
            <!-- Add or Remove from Favorites -->
            {% if movie['is_favorite'] %}
                <a href="{{ url_for('remove_favorite', movie_id=movie['id']) }}" class="favorite-btn">
                    <i class='bx bxs-heart'></i> Remove from Favorites
                </a>
            {% else %}
                <a href="{{ url_for('add_favorite', movie_id=movie['id']) }}" class="favorite-btn">
                    <i class='bx bx-heart'></i> Add to Favorites
                </a>
            {% endif %}
            <!-- User Rating -->
            <form method="POST" action="{{ url_for('rate_movie') }}" class="rating-form">
                <input type="hidden" name="movie_id" value="{{ movie['id'] }}">
                <label for="rating">Your Rating:</label>
                <select name="rating" required>
                    <option value="">Rate</option>
                    {% for i in range(1, 6) %}
                        <option value="{{ i }}" {% if movie['user_rating'] == i %}selected{% endif %}>{{ i }} Star{{ '' if i == 1 else 's' }}</option>
                    {% endfor %}
                </select>
                <button type="submit"><i class='bx bx-star'></i> Submit</button>
            </form>
        </div>
    </div>
{% endblock %}
